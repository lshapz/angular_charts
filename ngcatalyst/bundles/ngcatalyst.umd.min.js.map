{"version":3,"sources":["ng://ngcatalyst/lib/ngcatalyst.service.ts","ng://ngcatalyst/lib/ngcatalyst.component.ts","ng://ngcatalyst/lib/bar-chart.component.ts","ng://ngcatalyst/lib/bubble-chart.component.ts","ng://ngcatalyst/lib/line-plot.component.ts","ng://ngcatalyst/lib/pie-chart.component.ts","ng://ngcatalyst/lib/punch-card.component.ts","ng://ngcatalyst/lib/sunburst.component.ts","ng://ngcatalyst/lib/ngcatalyst.module.ts"],"names":["NgcatalystService","Injectable","args","providedIn","NgcatalystComponent","prototype","ngOnInit","Component","selector","template","BarChartComponent","Object","defineProperty","this","data","map","item","x","name","y","value","ngAfterViewInit","drawBarPlot","dataModel","propID","yAxisLabel","xAxisLabel","mouseover_callback","ngOnChanges","changes","id","yaxisvalue","xaxisvalue","localThis","d3.selectAll","remove","element","selection_string","document","querySelectorAll","selected","clientWidth","clientHeight","margin","top","right","bottom","left","xAxisAngle","width","height","d3.scaleBand","range","paddingInner","paddingOuter","d3.scaleLinear","xAxis","d3.axisBottom","scale","tickSizeOuter","yAxis","d3.axisLeft","tickSizeInner","tooltip","d3\n                .select","append","attr","style","chart","length","domain","d3.max","d","call","text","selectAll","dimensions","node","getBBox","enter","bandwidth","color","on","yval","transition","duration","html","d3.event","pageX","pageY","d3\n                        .select","dt","darker","hex2rgb","hex","parseInt","Input","yAxisAngle","title","BubbleChartComponent","sort","d3.descending","err","console","error","drawBubbleChart","processedData","xValue","yValue","zValue","pretty_duration","luxon","fromObject","seconds","normalize","toObject","get_min_bubble_size","max_value_size","cutoff","min_pixels","get_max_bubble_size","min_bubble_size","max_pixels","get_bubble_sizes","min","max","get_duration_zoom_range","max_value_mins","min_zoom_mins","get_x_zoom_range","asrs","xval","svg","elementWidth","elementHeight","colors","themeColors","containerId","xScale","formatDate","d3.timeParse","dateFormat","isDate","d3.scaleTime","mapped","ticks","tickFormat","d3.timeFormat","isTime","yScale","Math","sqrt","bubble_sizes","max_bubble_size","zScale","valMin","d3.min","valMax","d3.scaleQuantize","d3.select","xMin","xMax","yMin","yMax","invert","cValue","log","label","toFixed","LinePlotComponent","drawLinePlot","dataArray","forEach","el","push","assign","parseDate","date","a","b","detected_percent","xMap","format_attribute","yMap","d3.format","d3.extent","nice","line","d3.line","curve","d3.curveLinear","clip_id","datum","d3\n                    .select","filter","PieChartComponent","drawPieChart","_this","total","radius","pie","d3.pie","donut","donutWidth","arc","d3.arc","innerRadius","outerRadius","arcs","currentFill","attributes","fill","percent","round","savedColors","i","legend","currentLabel","df","PunchCardComponent","drawPunchCard","getDay","day","description","getDayName","undefined","elementName","JSON","parse","stringify","allValues","Array","concat","apply","hour_volumes","maxWidth","maxR","shift","labelsX","sumsY","sum","reduce","acc","val","sumsX","sizeScale","dataset","d3.scaleSqrt","rangeRound","f","colorScaleAxes","axisColors","rows","day_of_week","colorScale","dotLabels","v","idx","selection","select","exit","sumsYValues","sumsXValues","xLabelHeight","yLabelWidth","axisLabel","SunburstComponent","drawSunburst","d3.scaleOrdinal","d3.schemePaired","formatNumber","PI","partition","d3.partition","startAngle","x0","endAngle","x1","y0","y1","root","d3.hierarchy","size","nodes","descendants","children","parent","click","tween","xd","d3.interpolate","yd","yr","t","attrTween","self","frameElement","NgcatalystModule","NgModule","declarations","imports","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgcatalystService {\n\n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'eikos-ngcatalyst',\n  template: `\n    <p>\n      ngcatalyst works!\n    </p>\n  `,\n  styles: []\n})\nexport class NgcatalystComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, Input, OnChanges, SimpleChanges, AfterViewInit} from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'eikos-bar-chart',\n  template: `\n  <h2>{{title}}</h2>\n    <div style=\"height: 750px; width: 750px;\" >\n      <div [id]=\"propID\" style=\"width:100%;height:100%\">\n      </div>\n    </div>\n  `\n})\nexport class BarChartComponent implements OnChanges, AfterViewInit {\n  @Input() data: [{name: string, value: number}];\n  @Input() propID = 'barchart';\n  @Input() color = '#2DA8C9';\n  @Input() yAxisLabel = 'y';\n  @Input() xAxisLabel = 'x';\n  @Input() xAxisAngle = 45;\n  @Input() yAxisAngle = 45;\n  @Input() title = \"Bar Chart\";\n\n  constructor() { }\n\n  get dataModel() {\n    return this.data.map(item => {\n      return {x: item.name, y: item.value};\n    });\n  }\n\n  ngAfterViewInit() {\n    this.drawBarPlot(this.dataModel, this.propID, this.yAxisLabel, this.xAxisLabel, this.mouseover_callback);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawBarPlot(this.dataModel, this.propID, this.yAxisLabel, this.xAxisLabel, this.mouseover_callback);\n  }\n\n  mouseover_callback(x) {\n      return x;\n  }\n\n  drawBarPlot (data, id, yaxisvalue, xaxisvalue, mouseover_callback) {\n        const localThis = this;\n        d3.selectAll(`.${this.propID}_tooltip`).remove();\n\n        const selection_string = \"#\" + id;\n        if (document.querySelectorAll(selection_string + \" svg\")[0] != null) {\n          document.querySelectorAll(selection_string + \" svg\")[0].remove();\n        }\n\n        let element: any;\n        const selected = document.querySelectorAll(selection_string);\n\n        if (selected[0] == null) {\n          element = {clientWidth: 500, clientHeight: 500};\n        } else {\n          element = selected[0];\n        }\n        const margin = { top: 20, right: 30, bottom: 15, left: 40 };\n        if (this.xAxisAngle > 0) {\n          margin.bottom += (this.xAxisAngle / 2);\n        }\n        const width = element.clientWidth - margin.left - margin.right,\n          height = element.clientHeight - margin.top - margin.bottom;\n\n        const x = d3.scaleBand()\n          .range([0, width])\n          .paddingInner(.2)\n          .paddingOuter(.2);\n\n        const y = d3.scaleLinear()\n          .range([height - margin.bottom, 0]);\n\n        const xAxis = d3.axisBottom()\n          .scale(x)\n          .tickSizeOuter(0);\n\n        const yAxis = d3.axisLeft()\n          .scale(y)\n          .tickSizeInner(-width)\n          .tickSizeOuter(0);\n\n        const tooltip = d3\n          .select(\"body\")\n          .append(\"div\")\n          .attr(\"class\", `d3_visuals_tooltip ${this.propID}_tooltip`)\n          .style(\"opacity\", 0);\n\n        const chart = d3\n          .select(selection_string)\n          .append(\"svg\")\n          .attr(\"width\", width + margin.left + margin.right)\n          .attr(\"height\", height + margin.top + margin.bottom)\n          .append(\"g\")\n          .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        if (data.length > 0) {\n          y.domain([\n            0,\n            d3.max(data, function(d) {\n              return d.y;\n            })\n          ]);\n          x.domain(\n            data.map(function(d) {\n              return d.x;\n            })\n          );\n        }\n\n        chart\n          .append(\"g\")\n          .attr(\"class\", \"x axis\")\n          .attr(\"transform\", \"translate(0,\" +  (height - margin. bottom) + \")\")\n          .call(xAxis)\n          .append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"x\", width / 2 + margin.right)\n          .attr(\"y\", 30)\n          .style(\"text-anchor\", \"middle\")\n          .text(xaxisvalue);\n\n        const text = chart.selectAll(\"text\");\n\n        if (this.xAxisAngle > 0) {\n            text\n                .attr(\"transform\", `rotate(${this.xAxisAngle}) translate(0, ${margin.top})`)\n                .style(\"text-anchor\", \"middle\");\n\n            const dimensions = text.node().getBBox();\n\n            if (this.xAxisAngle === 45) {\n              text.attr(\"x\", 15)\n                  .attr(\"y\", dimensions.height * 2);\n            }\n\n            if (this.xAxisAngle === 90) {\n              text.attr(\"x\", dimensions.width - 10)\n                  .attr(\"y\", 0);\n            }\n        }\n\n        chart\n          .append(\"g\")\n          .attr(\"class\", \"y axis\")\n          .call(yAxis)\n          .append(\"text\")\n          .attr(\"class\", \"label\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", 6)\n          .attr(\"dy\", \".71em\")\n          .style(\"text-anchor\", \"end\")\n          .text(yaxisvalue);\n\n          function hex2rgb(hex) {\n            return [<any>'0x' + hex[1] + hex[2] | 0, <any>'0x' + hex[3] + hex[4] | 0, <any>'0x' + hex[5] + hex[6] | 0];\n          }\n\n        if (data.length > 0) {\n          chart\n            .selectAll(\".bar\")\n            .data(data)\n            .enter()\n            .append(\"rect\")\n            .attr(\"class\", \"bar\")\n            .attr(\"x\", function(d) {\n              return x(d.x);\n            })\n            .attr(\"y\", function(d) {\n              return y(d.y);\n            })\n            .attr(\"height\", function(d) {\n              return height - y(d.y) - margin.bottom;\n            })\n            .attr(\"width\", x.bandwidth() - x.paddingInner())\n            .style(\"fill\", localThis.color)\n            .on(\"mouseover\", function(d) {\n              const yval = mouseover_callback(d.y);\n              tooltip\n                .transition()\n                .duration(100)\n                .style(\"opacity\", 1);\n              tooltip\n                .html(\n                  xaxisvalue +\n                    \": <b>\" +\n                    d.x + \"</b><br>\" +\n                  yaxisvalue +\n                    \": <b>\" +\n                    yval + \"</b>\"\n                )\n                .style(\"left\", d3.event.pageX + 5 + \"px\")\n                .style(\"top\", d3.event.pageY - 28 + \"px\");\n              d3\n                .select(this)\n                .transition()\n                .duration(50)\n                .style(\"fill\", function(dt) {\n\n                  let currentFill: any;\n                  currentFill = hex2rgb(localThis.color);\n                  // if (currentFill.includes('#')){\n                  // } else {\n                  //   currentFill = currentFill.slice(0, currentFill.length -2).slice(4).split(', ')\n                  // }\n                  const darker = currentFill.map(item => {\n          // tslint:disable-next-line: radix\n                    return parseInt(item) * .75;\n                  });\n                  return `rgb(${darker[0]}, ${darker[1]}, ${darker[2]})`;\n                  });\n            })\n            .on(\"mouseout\", function(d) {\n              d3\n                .select(this)\n                .transition()\n                .duration(100)\n                .style(\"fill\", localThis.color);\n              tooltip\n                .transition()\n                .duration(300)\n                .style(\"opacity\", 0);\n            });\n        }\n  }\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport * as d3 from 'd3';\nimport luxon from 'luxon';\n\n@Component({\n  selector: 'eikos-bubble-chart',\n  template: `\n<h2>{{title}}</h2>\n<div style=\"height: 750px; width: 750px;\" >\n    <div [id]=\"propID\" style=\"width:100%;height:100%\"> </div>\n</div>\n  `\n})\nexport class BubbleChartComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() propID = 'bubble';\n  @Input() data: [{label: string, value: number}];\n  @Input() title = 'Bubble Chart';\n  @Input() isTime = false;\n  @Input() isDate = false;\n  @Input() themeColors = [\"#081A4E\", \"#092369\", \"#1A649F\", \"#2485B4\", \"#2DA8C9\", \"#5DC1D0\", \"#9AD5CD\", \"#D5E9CB\"];\n  // need 8 hex colors;\n  @Input() yAxisLabel = 'Value';\n  @Input() xAxisLabel = 'Date';\n  dateFormat = '%Y-%m-%d';\n  margin = { top: 20, right: 10, bottom: 30, left: 20 };\n\n  constructor() { }\n\n  get processedData() {\n    const data = this.data;\n    try {\n    data.sort(function(x, y) {\n      return d3.descending(x.value, y.value);\n    });\n    } catch (err) {\n      console.error(err);\n    }\n    return data;\n  }\n\n  ngOnInit() {\n    this.drawBubbleChart(this.processedData);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawBubbleChart(this.processedData);\n  }\n\n  ngAfterViewInit() {\n    this.drawBubbleChart(this.processedData);\n  }\n\n  xValue(d) {\n    return d.x;\n  }\n  yValue(d) {\n    return d.y;\n  }\n  zValue(d) {\n    return d.value;\n  }\n\n  pretty_duration(d) {\n    return luxon.duration.fromObject({\"seconds\": d}).normalize().toObject(); // this.moment??\n  }\n\n  get_min_bubble_size(max_value_size, cutoff, min_pixels) {\n    return (max_value_size >= cutoff) ? min_pixels : max_value_size;\n  }\n\n  get_max_bubble_size(max_value_size, min_bubble_size, cutoff, max_pixels) {\n    return (max_value_size >= cutoff) ? max_pixels : min_bubble_size * max_value_size + 25;\n  }\n\n  get_bubble_sizes(max_value_size) {\n    const cutoff = 10,\n      min_pixels = 5,\n      max_pixels = 125;\n    const min_bubble_size = (max_value_size < min_pixels) ? min_pixels : this.get_min_bubble_size(max_value_size, cutoff, min_pixels);\n    return {\n      'min': min_bubble_size,\n      'max': this.get_max_bubble_size(max_value_size, min_bubble_size, cutoff, max_pixels)\n    };\n  }\n\n  get_duration_zoom_range(max_value_mins, min_zoom_mins = 1) {\n    return [1, max_value_mins / min_zoom_mins]\n  }\n\n  get_x_zoom_range(asrs, xval, min_zoom_mins = 1) {\n    return this.get_duration_zoom_range(d3.max(asrs, xval), min_zoom_mins)\n  }\n\n  drawBubbleChart(data) {\n    if (!data) {\n      return ;\n    }\n    const localThis = this;\n    const selection_string = \"#\" + this.propID;\n    const pretty_duration = this.pretty_duration;\n    const xValue = this.xValue;\n    const yValue = this.yValue;\n    const zValue = this.zValue;\n    let element: any;\n\n    const selected = document.querySelectorAll(selection_string);\n\n    if (selected[0] == null) {\n      element = [{clientWidth: 500, clientHeight: 500}];\n    } else {\n      element = selected[0];\n    }\n\n\n    const margin = this.margin;\n    const elementWidth = element.clientWidth;\n    const elementHeight = element.clientHeight;\n    const ternaryWidth = elementWidth > 0 ? elementWidth : 400;\n    const width = ternaryWidth - margin.left - margin.right;\n    const ternaryHeight = elementHeight > 0 ? elementHeight : 400;\n    let height = ternaryHeight - margin.top - margin.bottom;\n    // retrieving globals\n    const colors = this.themeColors;\n\n    // Account for panel heading height if title exists.\n    if (this.title) {\n      height -= 40;\n    }\n\n    let svg;\n    const containerId = \"#\" + this.propID,\n      containerIdSvg = containerId + \" svg\",\n      containerIdG = containerIdSvg + \" g\";\n\n    d3.selectAll(`.${this.propID}_tooltip`).remove();\n    if (document.querySelectorAll(selection_string + \" svg\")[0] != null) {\n      document.querySelectorAll(selection_string + \" svg\")[0].remove();\n    }\n\n    const formatDate = d3.timeParse(this.dateFormat);\n\n    let xScale;\n\n    if (this.isDate) {\n      xScale = d3.scaleTime().range([0, width]);\n      data = data.map(function (d) {\n        if (d.mapped) { return d; }\n        d.x = formatDate(d.x);\n        d.mapped = true;\n        return d;\n      });\n    } else {\n      xScale = d3.scaleLinear().range([0, width]);\n    }\n\n    const xMap = function(d) {\n        return xScale(xValue(d));\n      },\n      xAxis = d3.axisBottom()\n        .scale(xScale)\n        .tickSizeInner(-height)\n        .ticks(6);\n\n      if (this.isDate) {\n        xAxis.tickFormat(d3.timeFormat(this.dateFormat));\n      } else {\n        xAxis.tickFormat(function(d) {\n          return localThis.isTime ? pretty_duration(60 * d) : d;\n        });\n      }\n\n    const yScale = d3.scaleLinear()\n        .range([height, 0]),\n      yMap = function(d) {\n        return yScale(yValue(d));\n      },\n      yAxis = d3.axisLeft()\n        .scale(yScale)\n        .tickSizeInner(-width)\n        .ticks(4);\n\n    const max_value_size = Math.sqrt(d3.max(data, function(d) {\n      return +d.value;\n    }));\n    const bubble_sizes = this.get_bubble_sizes(max_value_size);\n    const min_bubble_size = bubble_sizes['min'];\n    const max_bubble_size = bubble_sizes['max'];\n\n    const zScale = d3.scaleLinear().domain([1, max_value_size]).range([\n      min_bubble_size,\n      max_bubble_size\n    ]),\n      zMap = function(d) { return zScale(Math.sqrt(zValue(d))); };\n\n    const cValue = function(d) {\n      return d.value;\n    };\n\n    const valMin = d3.min(data, zValue);\n    const valMax = d3.max(data, zValue);\n\n\n    const color = d3.scaleQuantize().range(colors).domain([valMin, valMax]);\n\n    const tooltip = d3.select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", `d3_visuals_tooltip ${this.propID}_tooltip`)\n      .style(\"opacity\", 0);\n\n    // Get min and max values for x and y axis\n    let xMin = d3.min(data, xValue);\n    let xMax = d3.max(data, xValue);\n    const yMin = d3.min(data, yValue);\n    const yMax = d3.max(data, yValue);\n\n    // Determine padding for x-axis if it's dates.\n    if (this.isDate) {\n      const min = xScale(xMin);\n      const max = xScale(xMax);\n\n      xMin = xScale.invert(min - (min * .001));\n      xMax = xScale.invert((max * .001) + max);\n    } else {\n      xMin = xMin - (xMin / 2);\n      xMax = xMax + (xMax / 4);\n    }\n\n\n    // Subtract half the min value from min and add one fourth\n    // of the max to the max so that the bubbles never go outside of the graph\n    xScale.domain([xMin, xMax]);\n    yScale.domain([yMin - yMin/2, yMax + yMax/4]);\n    svg = d3.select(containerId)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n    svg.append(\"rect\")\n      .attr(\"fill-opacity\", \"0\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"id\", \"top-x\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis)\n      .append(\"text\")\n      .attr(\"class\", \"label\")\n      .attr(\"x\", width)\n      .attr(\"y\", -10)\n      .style(\"text-anchor\", \"end\")\n      .text(this.xAxisLabel);\n\n    svg.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .attr(\"id\", \"top-y\")\n      .call(yAxis)\n      .append(\"text\")\n      .attr(\"class\", \"label\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", 6)\n      .attr(\"dy\", \".71em\")\n      .style(\"text-anchor\", \"end\")\n      .text(this.yAxisLabel);\n\n  // const mouseOver = this.mouseOverBubble;\n\n    svg.selectAll(\".dot\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"r\", zMap)\n      .attr(\"cx\", xMap)\n      .attr(\"cy\", yMap)\n      .attr(\"stroke\", \"gray\")\n      .attr(\"stroke-width\", 1)\n      .style(\"fill\", function(d) {\n        const saveThisColor = color(cValue(d));\n        return saveThisColor;\n      })\n      .style(\"opacity\", 0.75)\n      .on(\"mouseover\", function(d) {\n        console.log(tooltip);\n        tooltip.transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        // tslint:disable-next-line:max-line-length\n      tooltip.html('<b class=\"tooltip-header\">' + d.label + '</b>' + \"<br/><b>\" + localThis.xAxisLabel + \"</b> \" + (localThis.isTime ? localThis.pretty_duration(60 * localThis.xValue(d)) :  localThis.xValue(d)) + \"<br/><b>\" + localThis.yAxisLabel + \": </b>\" + localThis.yValue(d)\n          .toFixed(2) + \"<br> <b>value:</b> \" + localThis.zValue(d))\n          .style(\"left\", (d3.event.pageX + 5) + \"px\")\n          .style(\"top\", (d3.event.pageY - 28) + \"px\");\n        d3.select(tooltip[0])\n          .transition()\n          .duration(50)\n          .style(\"opacity\", 1);\n      })\n      .on(\"mouseout\", function(d){\n        const tooltip = d3.select(`.${localThis.propID}_tooltip`);\n          tooltip.transition().duration(300).style(\"opacity\", 0);\n          d3.select(tooltip[0])\n            .transition()\n            .duration(200)\n            .style(\"opacity\", 0);\n      })\n  }\n\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'eikos-line-plot',\n  template: `\n  <h2>{{title}}</h2>\n  <div style=\"height: 750px; width: 750px;\" >\n      <div [id]=\"propID\" style=\"width:100%;height:100%\"> </div>\n  </div>\n`\n})\nexport class LinePlotComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() propID = 'line';\n  @Input() data: [{date: string, value: number}];\n  @Input() title: \"Line Plot\";\n  @Input() color = \"#000\";\n  @Input() yAxisLabel = 'Value';\n  @Input() xAxisLabel = 'Date';\n\n  constructor() { }\n\n  // you might need a method like this to reformat given data with the appropriate field names,\n  // get dataModel() {\n  //   return this.data.map(item => {\n  //     return {date: item.something, value: item.somethingElse};\n  //   });\n  // }\n\n  ngOnInit() {\n    this.drawLinePlot(this.data, \"#\" + this.propID, this.color);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawLinePlot(this.data, \"#\" + this.propID, this.color);\n  }\n\n  ngAfterViewInit() {\n    this.drawLinePlot(this.data, \"#\" + this.propID, this.color);\n  }\n\n  drawLinePlot(dataArray, selection_string, color) {\n    const localThis = this;\n\n    d3.selectAll(`.${this.propID}_tooltip`).remove();\n    if (document.querySelectorAll(selection_string + \" svg\")[0] != null) {\n      document.querySelectorAll(selection_string + \" svg\")[0].remove();\n    }\n    // make copy of the original data so we do not mutate it\n    const data = [];\n    dataArray.forEach(el => data.push(Object.assign({}, el)));\n\n    const parseDate = d3.timeParse('%Y-%m-%d');\n    const formatDate = d3.timeFormat('%B %-d %Y');\n    // https://github.com/d3/d3-time-format to change how this is formatted - leave the parseDate because that's for sorting the data\n\n    if (typeof data[0].date === 'string') {\n      data.forEach(function(d) {\n        d.date = parseDate(d.date);\n      });\n    }\n\n    data.sort(function(a, b) {\n      return a.date - b.date;\n    });\n\n    const detected_percent =\n      d3.max(data, function(d) {\n        return d.value;\n      }) <= 1\n        ? true\n        : false;\n    let element: any;\n\n    const selected = document.querySelectorAll(selection_string);\n\n    if (selected[0] == null) {\n      element = [{clientWidth: 500, clientHeight: 500}];\n    } else {\n      element = selected[0];\n    }\n\n    const margin = { top: 20, right: 30, bottom: 45, left: 40 },\n      width = element.clientWidth - margin.left - margin.right;\n    let height = element.clientHeight - margin.top - margin.bottom;\n\n    // Account for panel heading height if the title exists.\n    if (this.title) {\n      height -= 40;\n    }\n\n    const xValue = function(d) {\n        return d.date;\n      },\n      xScale = d3.scaleTime().range([0, width - margin.right]),\n      xMap = function(d) {\n        return xScale(xValue(d));\n      },\n      xAxis = d3.axisBottom()\n        .scale(xScale)\n        .tickSizeInner(-height)\n        .ticks(6);\n    let format_attribute;\n    if (detected_percent) {\n      format_attribute = d3.format(\"%\");\n    } else {\n      format_attribute = d3.format(\"\");\n    }\n\n    const yValue = function(d) {\n        return d.value;\n      },\n      yScale = d3.scaleLinear().range([height, 0]),\n      yMap = function(d) {\n        console.log(\"y scale is \" + yScale(yValue(d)));\n        console.log(d);\n        return yScale(yValue(d));\n      },\n      yAxisScale = d3.scaleLinear()\n      .range([height - yScale(d3.min(data)), 0]);\n\n\n    xScale.domain(d3.extent(data, xValue)).nice();\n    yScale.domain(d3.extent(data, yValue)).nice();\n\n    // yScale.domain([d3.min(data, yValue), d3.max(data, yValue)]);\n\n    const yAxis = d3.axisLeft()\n      .scale(yScale)\n      // .tickValues([-200, -150, -100, -50, 0, 50, 100, 150, 200, 250, 300, 350])\n      .tickSizeInner(-width)\n      .tickFormat(format_attribute);\n\n    const line = d3.line()\n      .x(xMap)\n      .y(yMap)\n      .curve(d3.curveLinear);\n\n    // debugger\n\n    const svg = d3\n      .select(selection_string)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    const tooltip = d3\n      .select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", `d3_visuals_tooltip ${this.propID}_tooltip`)\n      .style(\"opacity\", 0);\n\n    svg.style(\"fill\", \"transparent\");\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis xaxis axis-line-plot1\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .style('fill', 'black')\n      .style(\"font-size\", \"14px\")\n      .call(xAxis)\n      .append(\"text\")\n      .attr(\"x\", (width / 2))\n      .attr(\"y\", 25)\n      .attr(\"dy\", \".71em\")\n      .style(\"text-anchor\", \"middle\")\n      .attr(\"font-size\", \"16px\")\n      .text(this.xAxisLabel);\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"y axis axis-line-plot\")\n      .style(\"fill\", \"black\")\n      .call(yAxis)\n      .append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", -margin.left)\n      .attr(\"dy\", \".71em\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"font-size\", \"16px\")\n      .text(this.yAxisLabel);\n\n    const clip_id = \"clip-\" + this.propID;\n\n    // svg\n    //   .append(\"clipPath\")\n    //   .attr(\"id\", clip_id)\n    //   .append(\"rect\")\n    //   .attr(\"x\", 0)\n    //   .attr(\"y\", 0)\n    //   .attr(\"width\", width > 0 ? width : 0)\n    //   .attr(\"height\", height > 0 ? height : 0);\n\n    // svg\n    //   .append(\"rect\")\n    //   .attr(\"class\", \"pane\")\n    //   .attr(\"width\", element.clientWidth)\n    //   .attr(\"height\", height)\n    //   .attr(\"clip-path\", \"url(#\" + clip_id + \")\");\n\n    svg\n      .append(\"path\")\n      .datum(data)\n      .attr(\"class\", \"line lineplotline\")\n      .attr(\"d\", line)\n      .attr(\"stroke-width\", 3)\n      .attr(\"stroke\", this.color);\n      // .attr(\"stroke\", function (d) {\n      //   return (d.value > 50) ? 'green' : 'red';\n      // });\n\n    svg\n      .selectAll(\".dot\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"r\", 5)\n      .attr(\"cx\", xMap)\n      .attr(\"cy\", yMap)\n      .attr(\"clip-path\", \"url(#\" + clip_id + \")\")\n      .attr(\"fill\", \"black\")\n      .attr(\"opacity\", 0)\n      .on(\"mouseover\", function(d) {\n        tooltip\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        tooltip\n          .html(\n            \"Date: \" + formatDate(d.date) +\n              \"<br>\" +\n              localThis.yAxisLabel +\n              \": \" +\n              format_attribute(yValue(d))\n          )\n          .style(\"left\", d3.event.pageX + 5 + \"px\")\n          .style(\"top\", d3.event.pageY - 28 + \"px\");\n        d3\n          .select(this)\n          .transition()\n          .duration(50)\n          .style(\"fill\", \"black\")\n          .attr(\"opacity\", 1);\n\n      })\n      .on(\"mouseout\", function(d) {\n        tooltip\n          .transition()\n          .duration(300)\n          .style(\"opacity\", 0);\n        d3\n          .select(this)\n          .transition()\n          .duration(50)\n          .attr(\"opacity\", 0);\n      });\n\n    svg\n      .selectAll(\".tick\")\n      .filter(function(d) {\n        return d === 0;\n      })\n      .remove();\n\n  }\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'eikos-pie-chart',\n  template: `\n  <h2>{{title}}</h2>\n  <div style=\"height: 750px; width: 750px;\" >\n      <div [id]=\"propID\" style=\"width:100%;height:100%\"> </div>\n  </div>\n`\n})\nexport class PieChartComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() propID = 'pie';\n  @Input() data: [{label: string, value: number}];\n  @Input() title: 'Pie Chart';\n  @Input() donutWidth = 0; // in pixels\n  @Input() colors = [\"#081A4E\", \"#092369\", \"#1A649F\", \"#2485B4\", \"#2DA8C9\", \"#5DC1D0\", \"#9AD5CD\", \"#D5E9CB\", \"#64B5F6\", \"#01579B\"];\n    // need 10 hex colors;\n  savedColors = {};\n  total = 0;\n\n  constructor() { }\n\n  // you might need a method like this to reformat given data with the appropriate field names,\n  // get dataModel() {\n  //   return this.data.map(item => {\n  //     return {label: item.something, value: item.somethingElse};\n  //   });\n  // }\n\n  ngOnInit() {\n    this.drawPieChart();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawPieChart();\n  }\n\n  ngAfterViewInit() {\n    this.drawPieChart();\n  }\n\n  drawPieChart() {\n    if (this.total === 0 && this.data) {\n      this.data.forEach(el => {this.total += el['value']; });\n    }\n\n    d3.selectAll(`.${this.propID}_tooltip`).remove();\n    const selection_string = \"#\" + this.propID;\n    if (document.querySelectorAll(selection_string + \" svg\")[0] != null) {\n      document.querySelectorAll(selection_string + \" svg\")[0].remove();\n    }\n    let element: any;\n    const selected = document.querySelectorAll(selection_string);\n\n    if (selected[0] == null) {\n      element = {clientWidth: 500, clientHeight: 500};\n    } else {\n      element = selected[0];\n    }\n\n    function hex2rgb(hex) {\n      return [<any>'0x' + hex[1] + hex[2] | 0, <any>'0x' + hex[3] + hex[4] | 0, <any>'0x' + hex[5] + hex[6] | 0];\n    }\n\n    const localThis = this;\n\n    const margin = {top: 10, right: 0, bottom: 20, left: 0},\n      width = element.clientWidth - margin.left - margin.right,\n      height = element.clientHeight - margin.top - margin.bottom,\n      radius = height > width ?  width / 2 : height / 2;\n\n    const svg = d3.select(selection_string)\n      .append(\"svg\")\n      .data([this.data], function(d) {\n        if (d) {\n          return d.label;\n        }\n      })\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\")\n      // sets the center of the piechart to center of container\n      .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n    svg\n      .append(\"text\")\n      .attr('font-size', '4em')\n      .attr('y', 20)\n      .attr('x', -50)\n      .text(localThis.total);\n\n    // add tooltip div to the DOM\n    const tooltip = d3\n      .select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", `d3_visuals_tooltip ${this.propID}_tooltip`)\n      .style(\"opacity\", 0);\n\n    // create function that will be used to draw slices\n    const pie = d3.pie()\n      .value(function(d) { return d.value; });\n\n    // Declare an arc generator function\n    const donut = this.donutWidth;\n    const arc = d3.arc()\n      .innerRadius(donut)\n      .outerRadius(radius);\n\n    // Select paths, use arc generator to draw\n    const arcs = svg.selectAll(\"g.slice\")\n      .data(pie)\n      .enter()\n        .append(\"g\")\n        .attr(\"class\", \"slice\");\n\n    // add tooltip on mouseover of slice\n    arcs.on(\"mouseover\", function(d) {\n      // calculate the percent of total for the slice\n      d3.select(this).selectAll('path').\n        attr('fill', function(dt) {\n\n            let currentFill = this.attributes.fill.value;\n         currentFill = hex2rgb(currentFill);\n        // if (currentFill.includes('#')){\n        // } else {\n        //   currentFill = currentFill.slice(0, currentFill.length -2).slice(4).split(', ')\n        // }\n        const darker = currentFill.map(item => {\n// tslint:disable-next-line: radix\n          return parseInt(item) * .75;\n        });\n        return `rgb(${darker[0]}, ${darker[1]}, ${darker[2]})`;\n\n        });\n      const percent = Math.round(d.data.value / localThis.total * 100);\n      tooltip.transition()\n        .duration(100)\n        .style(\"opacity\", 1);\n      tooltip\n        .html(\n          d.data.label + ': ' + '<b>' + d.data.value + '</b>' + '<br/>' + '<b>' + percent + '</b>' + '% of total'\n        )\n        .style(\"left\", d3.event.pageX + \"px\")\n        .style(\"top\", d3.event.pageY + \"px\");\n\n    })\n      .on(\"mouseout\", function(d) {\n        tooltip.transition()\n          .duration(300)\n          .style(\"opacity\", 0);\n\n      d3.select(this).selectAll('path').\n        attr('fill', function(dt) {\n          const label = dt.data ? dt.data.label : dt.label;\n          return localThis.savedColors[label];\n\n        });\n      });\n\n    const colors = this.colors;\n\n    // add colors to each slice\n    arcs.append(\"path\")\n      .attr(\"fill\", function (d, i) {\n        const length = colors.length;\n        let color;\n        if (localThis.savedColors[d.data.label]) {\n          color = localThis.savedColors[d.data.label];\n        } else {\n          i >= length ? color = colors[i - length] : color = colors[i];\n          localThis.savedColors[d.data.label] = color;\n\n        }\n        return color;\n      })\n      .attr(\"d\", arc);\n\n\n    // This is built in for smaller viewports\n    // if the width is less than 800px then the legend won't be added\n    // to the SVG the user is still able to hover or click on the pie\n    // secion to see the label and value of the section\n    // let localThis = this;\n    if (width > 800) {\n      const legend = svg.selectAll(\".legend\")\n        .data(this.data, function(d) {\n          return d.label;\n        })\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"legend\")\n        .attr(\"transform\", function(d, i) { return \"translate(30,\" + 25 * i + \")\"; });\n\n      legend.append(\"rect\")\n        .attr(\"x\", radius + 20)\n        .attr(\"y\", -radius + 20)\n        .attr(\"width\", 20)\n        .attr(\"height\", 20)\n        .attr(\"fill\", function (d, i) {\n            const length = colors.length;\n            let color;\n          if (localThis.savedColors[d.label]) {\n            color = localThis.savedColors[d.label];\n          } else {\n            i >= length ? color = colors[i - length] : color = colors[i];\n            localThis.savedColors[d.label] = color;\n\n          }\n          return color;\n\n        })\n        .attr(\"d\", arc);\n\n      legend.append(\"text\")\n        .attr(\"x\", radius + 45)\n        .attr(\"y\", -radius + 30)\n        .attr(\"dy\", \".35em\")\n        .attr(\"font-size\", 14)\n        .style(\"text-anchor\", \"start\")\n        .text(function(d, i) {\n          return localThis.data[i].label;\n        });\n\n\n        legend.on('mouseover', function(d) {\n          const local = localThis;\n          const currentLabel = d.label;\n          d3.selectAll('g.slice path').data([d], function(dt) {\n              return dt.data ? dt.data.label : dt.label;\n          })\n          .attr('fill', function(df) {\n            if (df.label === currentLabel) {\n              let currentFill = this.attributes.fill.value;\n               currentFill = hex2rgb(currentFill);\n              const darker = currentFill.map(item => {\n// tslint:disable-next-line: radix\n                return parseInt(item) * .75;\n              });\n              return `rgb(${darker[0]}, ${darker[1]}, ${darker[2]})`;\n            } else {\n              return ;\n            }\n          });\n        });\n\n\n        legend.on('mouseout', function(d) {\n          const local = localThis;\n          const currentLabel = d.label;\n          d3.selectAll('g.slice path').data([d], function(dt) {\n              return dt.data ? dt.data.label : dt.label;\n          })\n          .attr('fill', function(df) {\n            return localThis.savedColors[df.label];\n          });\n        });\n    }\n  }\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport * as d3 from 'd3';\nimport luxon from 'luxon';\n\n@Component({\n  selector: 'eikos-punch-card',\n  styles: [`\n    .punch-border {\n      stroke: grey\n    }\n  `],\n  template: `\n  <h2>{{title}}</h2>\n  <div style=\"height: 750px; width: 1500px; margin-left: 3%\" >\n      <div [id]=\"propID\" style=\"width:100%;height:100%\"> </div>\n  </div>\n`\n})\nexport class PunchCardComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() propID = 'punch';\n  @Input() data: [{day_of_week: string, hour_volumes: []}];\n  @Input() title: string;\n  @Input() axisColors = [\"#e5b1a5\", \"#ff2b2b\"];\n  @Input() axisLabel = 'Date';\n  @Input() colors =  [\"#081A4E\", \"#092369\", \"#1A649F\", \"#2485B4\", \"#2DA8C9\", \"#5DC1D0\", \"#9AD5CD\", \"#D5E9CB\", \"#64B5F6\", \"#01579B\"];\n  // tslint:disable-next-line:max-line-length\n  labelsX = [\"12a\", \"1a\", \"2a\", \"3a\", \"4a\", \"5a\", \"6a\", \"7a\", \"8a\", \"9a\", \"10a\", \"11a\", \"12p\", \"1p\", \"2p\", \"3p\", \"4p\", \"5p\", \"6p\", \"7p\", \"8p\", \"9p\", \"10p\", \"11p\"];\n  constructor() { }\n\n  ngOnInit() {\n    this.drawPunchCard();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawPunchCard();\n  }\n\n  ngAfterViewInit() {\n    this.drawPunchCard();\n  }\n\n  getDay (day) {\n    const days = [\n        { name: 'Mon', value: 2, description: 'Monday' },\n        { name: 'Tue', value: 3, description: 'Tuesday' },\n        { name: 'Wed', value: 4, description: 'Wednesday' },\n        { name: 'Thu', value: 5, description: 'Thursday' },\n        { name: 'Fri', value: 6, description: 'Friday' },\n        { name: 'Sat', value: 7, description: 'Saturday' },\n        { name: 'Sun', value: 1, description: 'Sunday' }\n    ];\n    const result = days.filter(d => {\n      return d.name === day;\n    });\n    return result[0].value;\n  }\n\n  getDayName (day) {\n    const days = [\n        { name: 'Mon', value: \"1\", description: 'Monday' },\n        { name: 'Tue', value: \"2\", description: 'Tuesday' },\n        { name: 'Wed', value: \"3\", description: 'Wednesday' },\n        { name: 'Thu', value: \"4\", description: 'Thursday' },\n        { name: 'Fri', value: \"5\", description: 'Friday' },\n        { name: 'Sat', value: \"6\", description: 'Saturday' },\n        { name: 'Sun', value: \"0\", description: 'Sunday' }\n    ];\n    const result = days.filter(d => {\n      return d.value === day;\n    });\n\n    return result[0].name;\n  }\n\n  drawPunchCard() {\n    if (this.data === undefined) { return; }\n      // try {\n      //   if (this.data.length === 0) { return; }\n      // } catch (e) {\n      //   return;\n      // }\n\n    const localThis = this;\n    // This was needed for the Incident Set Modal Test to pass.\n\n    const elementName = \"#\" + this.propID;\n    if (document.querySelectorAll(elementName + \" svg\")[0] != null) {\n      document.querySelectorAll(elementName + \" svg\")[0].remove();\n    }\n\n    let data = JSON.parse(JSON.stringify(this.data)); // deep copy\n\n\n    const margin = { top: 40, right: 75, bottom: 40, left: 15 };\n    const padding = 3;\n    const xLabelHeight = 30;\n    const yLabelWidth = 30;\n    const borderWidth = 1;\n    // const width = 500;\n    // const height = 181;\n\n    let element: any;\n\n    const selected = document.querySelectorAll(elementName);\n\n    if (selected[0] == null) {\n      element = [{clientWidth: 1000, clientHeight: 500}];\n    } else {\n\n      element = selected[0];\n    }\n\n    const width =\n      element.clientWidth - margin.left - margin.right - yLabelWidth;\n    const height =\n    element.clientHeight / 24 * 7 +\n      2 * xLabelHeight - margin.top - margin.bottom;\n\n//   if (this..changeHeight !== undefined ) {\n//       this..changeHeight(height + margin.top + margin.bottom + 2 * xLabelHeight);\n//  }\n\n    const chart = d3\n      .select(elementName)\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"data-height\", \"0.5678\")\n      .attr(\"viewBox\", `0 0 ${width / 2.1} ${height * 2}`)\n      .attr(\"preserveAspectRatio\", \"xMaxYMax meet\")\n      // .attr(\"width\", width + margin.left + margin.right + 2 * yLabelWidth)\n      // .attr(\"height\", height + margin.top + margin.bottom + 2 * xLabelHeight)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    // array of all values in the data, for min maxing and length calculations\n    const allValues = Array.prototype.concat.apply(\n      [],\n      data.map(function(d) {\n        return d.hour_volumes;\n      })\n    );\n    // finds longest array in data\n    const maxWidth = d3.max(\n      data.map(function(d) {\n        return d.hour_volumes.length;\n      })\n    );\n    // maximum radius for bubble.\n    const maxR =\n      d3.min([\n        (width - yLabelWidth) / maxWidth,\n        (height - xLabelHeight) / data.length\n      ]) / 2;\n\n    // sort data and translate into human-readable\n    data.sort(function(a, b) {\n      parseInt(a[\"day_of_week\"]) > parseInt(b[\"day_of_week\"]);\n    });\n\n    data.push(data.shift());\n\n    if (data[0][\"day_of_week\"].length === 1) {\n      data = data.map(function(d) {\n        d[\"day_of_week\"] = localThis.getDayName(d[\"day_of_week\"]);\n        return d;\n      });\n    }\n\n    // create labels\n    const labelsX = this.labelsX;\n\n    // calc total volumes per day, for sumsY label\n    const sumsY = [];\n    for (let i = 0; i < data.length; i++) {\n      const sum = data[i][\"hour_volumes\"].reduce(function(acc, val) {\n        return acc + val;\n      }, 0);\n      sumsY.push(sum);\n    }\n\n    // calc total volumes per hour, for sumsX label\n    const sumsX = [];\n    for (let i = 0; i < data[0][\"hour_volumes\"].length; i++) {\n      const sum = data.reduce(function(acc, val) {\n        return acc + val[\"hour_volumes\"][i];\n      }, 0);\n      sumsX.push(sum);\n    }\n\n    // this essentially scales radius values according to the maxR\n    const sizeScale = function(d, dataset) {\n      if (d === 0) { return 0; }\n      const f = d3.scaleSqrt()\n        .domain([d3.min(dataset), d3.max(dataset)])\n        .rangeRound([2, maxR - padding]);\n      return f(d);\n    };\n\n    const colorScale = function(d, dataset) {\n      const f = d3.scaleLinear()\n        .domain([d3.min(dataset), d3.max(dataset)])\n        .range([localThis.colors[7], localThis.colors[0]]);\n\n      return f(d);\n    };\n\n    const colorScaleAxes = function(d, dataset) {\n      const f = d3.scaleLinear()\n        .domain([d3.min(dataset), d3.max(dataset)])\n        .range(localThis.axisColors);\n      return f(d);\n    };\n\n    // yAxis Border\n    chart\n      .append(\"rect\")\n      .attr(\"x\", yLabelWidth)\n      .attr(\"y\", xLabelHeight + 2 * maxR)\n      .attr(\"width\", 2 * maxR)\n      .attr(\"height\", height - xLabelHeight)\n      .attr(\"stroke-width\", 2)\n      .attr(\"stroke\", \"grey\")\n      .attr(\"fill\", \"transparent\")\n      .attr(\"shape-rendering\", \"crispEdges\")\n      .attr(\"class\", \"punch-border\");\n    // xAxis Border\n    chart\n      .append(\"rect\")\n      .attr(\"x\", yLabelWidth + 2 * maxR)\n      .attr(\"y\", xLabelHeight)\n      .attr(\"width\", maxR * 24 * 2)\n      .attr(\"height\", 2 * maxR)\n      .attr(\"stroke-width\", 2)\n      .attr(\"stroke\", \"grey\")\n      .attr(\"fill\", \"transparent\")\n      .attr(\"shape-rendering\", \"crispEdges\")\n      .attr(\"class\", \"punch-border, foo-bar\");\n\n    // creates rows according to data labels\n    const rows = chart.selectAll(\".row\").data(data, function(d) {\n        return d.day_of_week;\n      })\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"row\")\n      .attr(\"transform\", function(d, i) {\n        return (\n          \"translate(\" +\n          (yLabelWidth + 2 * maxR) +\n          \",\" +\n          (maxR * i * 2 + 3 * maxR + xLabelHeight) +\n          \")\"\n        );\n      });\n\n    // creating the elements that will hold and represent our data\n    rows.selectAll(\"circle\")\n      .data(function(d) {\n        return d.hour_volumes;\n      })\n      .enter()\n      .append(\"circle\")\n      .attr(\"cy\", 0)\n      .style(\"fill\", \"transparent\")\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"r\", function(d) {\n        return sizeScale(d, allValues);\n      })\n      .attr(\"cx\", function(d, i) {\n        return i * maxR * 2 + maxR;\n      })\n      .attr(\"shape-rendering\", \"auto\")\n      .style(\"fill\", function(d) {\n        return colorScale(d, allValues);\n      });\n\n    // adds labels\n    const dotLabels = rows.selectAll(\".dot-label\").data(function(d) {\n      return d.hour_volumes.map(function(v, idx) {\n        return [v, d.day_of_week, idx];\n      });\n    })\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"dot-label\")\n      .on(\"mouseover\", function(d) {\n        const selection = d3.select(this);\n        if (d[0] > 0) {\n          selection.style(\"cursor\", \"pointer\");\n        }\n        selection\n          .select(\"circle\")\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        selection\n          .select(\"text\")\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n      })\n\n      .on(\"mouseout\", function(d) {\n        const selection = d3.select(this);\n        selection.style(\"cursor\", \"default\");\n        selection\n          .select(\"circle\")\n          .transition()\n          .style(\"opacity\", 0);\n        selection\n          .select(\"text\")\n          .transition()\n          .style(\"opacity\", 0);\n      });\n      // .on(\"click\", function(d, i) {\n      //   if (localThis.onClick !== undefined) {\n      //     if (d[0] > 0) {\n      //       localThis.onClick(\"point\", localThis.getDay(d[1]), i);\n      //     }\n      //   }\n      // });\n\n\n    dotLabels\n      .append(\"circle\")\n      .attr(\"r\", function(d) {\n        return maxR;\n      })\n      .attr(\"cx\", function(d, i) {\n        return maxR;\n        })\n      .attr(\"cy\", function(d, i) {\n        return maxR;\n      })\n      .style(\"fill\", localThis.colors[0])\n      .style(\"opacity\", 0);\n\n    dotLabels\n      .append(\"text\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"fill\", \"#ffffff\")\n      .style(\"opacity\", 0)\n      .style('font-size', 8);\n\n    dotLabels.exit().remove();\n\n    // centers and resizes the text so it doesn't exceed its rect\n    dotLabels\n      .attr(\"transform\", function(d, i) {\n        return \"translate(\" + i * maxR * 2 + \",\" + -maxR + \")\";\n      })\n      .select(\"text\")\n      .text(function(d) {\n        return d[0];\n      })\n      .attr(\"y\", maxR + 4)\n      .attr(\"x\", maxR);\n\n    // ensures the colored rect on the label is the width and height of the circle diameter (maxR * 2)\n    dotLabels\n      .select(\"rect\")\n      .attr(\"width\", maxR * 2)\n      .attr(\"height\", maxR * 2);\n\n    // creates labels for the x axis (hour)\n    chart.selectAll(\".xLabel\")\n      .data(labelsX)\n    // styling for the labels\n      .enter()\n      .append(\"text\")\n      .attr(\"y\", xLabelHeight)\n      .attr(\"transform\", \"translate(0,-6)\")\n      .attr(\"class\", \"xLabel\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"fill-opacity\", 0)\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"x\", function(d, i) {\n        return maxR * i * 2 + 3 * maxR + yLabelWidth;\n      })\n      .style(\"fill-opacity\", 1);\n\n    // creates labels for the y axis (day of week)\n    const yLabels = chart.selectAll(\".yLabel\")\n      .data(data, function(d) {\n        return d.day_of_week;\n      })\n    // y label creation\n      .enter()\n      .append(\"text\")\n      .text(function(d) {\n        return d.day_of_week;\n      })\n      .attr(\"x\", yLabelWidth)\n      .attr(\"class\", \"yLabel\")\n      .style(\"text-anchor\", \"end\")\n      .style(\"fill-opacity\", 0)\n      .attr(\"y\", function(d, i) {\n        return maxR * i * 2 + 3 * maxR + xLabelHeight;\n      })\n      .attr(\"transform\", \"translate(-6,\" + maxR / 2.5 + \")\")\n      .style(\"fill-opacity\", 1);\n\n    // append sums to rows\n    chart.selectAll(\".sums-y\")\n      .data(sumsY)\n      .enter()\n      .append(\"circle\")\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"cy\", 0)\n      .attr(\"class\", \"sums-y\")\n      .style(\"fill\", \"#ffffff\")\n      .style(\"fill-opacity\", 0)\n      .attr(\"cy\", function(d, i) {\n        return maxR * i * 2 + 3 * maxR + xLabelHeight;\n      })\n      .attr(\"r\", function(d) {\n        return sizeScale(d, sumsY);\n      })\n      .attr(\"cx\", yLabelWidth + maxR)\n      .attr(\"shape-rendering\", \"auto\")\n      .style(\"fill\", function(d) {\n        return colorScaleAxes(d, sumsY);\n      })\n      .style(\"fill-opacity\", 1)\n      .style(\"stroke\", \"#9e9999\")\n      .style(\"stroke-width\", 1);\n\n    const sumsYValues = chart.selectAll(\".sums-y-value\").data(sumsY)\n    // //adds mouseover transition\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"sums-y-value\")\n      .on(\"mouseover\", function(d) {\n        const selection = d3.select(this);\n        if (d > 0) {\n          selection.style(\"cursor\", \"pointer\");\n        }\n        selection\n          .select(\"circle\")\n          .transition()\n          .duration(0)\n          .style(\"opacity\", 1);\n        selection\n          .select(\"text\")\n          .transition()\n          .duration(0)\n          .style(\"opacity\", 1);\n      })\n      .on(\"mouseout\", function(d) {\n        const selection = d3.select(this);\n        selection.style(\"cursor\", \"default\");\n        selection\n          .select(\"circle\")\n          .transition()\n          .style(\"opacity\", 0);\n        selection\n          .select(\"text\")\n          .transition()\n          .style(\"opacity\", 0);\n      });\n      // .on(\"click\", function(d, i) {\n      //   if (d > 0) {\n      //     if (localThis !== undefined) {\n      //       localThis.onClick(\n      //         \"day\",\n      //         localThis.getDay(yLabels[0][i].textContent),\n      //         -1\n      //       );\n      //     }\n\n      //     // window.location.href = redirect_url + yLabels[0][i].textContent + '/-1';\n      //   }\n      // });\n\n    // creates the needed svg and text elements to make the labels actually readable\n    sumsYValues\n      .append(\"circle\")\n      .attr(\"r\", function(d) {\n        return maxR;\n      })\n      .attr(\"cx\", function(d, i) {\n        return maxR;\n        })\n      .attr(\"cy\", function(d, i) {\n        return maxR;\n      })\n      .style(\"fill\", this.axisColors[1])\n      .style(\"opacity\", 0);\n\n    sumsYValues\n      .append(\"text\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"fill\", \"#ffffff\")\n      .style(\"opacity\", 0)\n      .style('font-size', 8);\n\n    sumsYValues.exit().remove();\n\n    // centers and resizes the text so it doesn't exceed its rect\n    sumsYValues\n      .attr(\"transform\", function(d, i) {\n        return (\n          \"translate(\" +\n          yLabelWidth +\n          \",\" +\n          (xLabelHeight + 2 * maxR + 2 * maxR * i) +\n          \")\"\n        );\n      })\n      .select(\"text\")\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"y\", maxR + 4)\n      .attr(\"x\", maxR);\n\n    // ensures the colored rect on the label is the width and height of the circle diameter (maxR * 2)\n    sumsYValues\n      .select(\"rect\")\n      .attr(\"width\", maxR * 2)\n      .attr(\"height\", maxR * 2);\n\n    // create top label for y\n    // chart\n    //   .append(\"text\")\n    //   .attr(\"x\", yLabelWidth)\n    //   .attr(\"y\", height + maxR * 2)\n    //   .append(\"tspan\")\n    //   .attr(\"class\", \"sum-label-y\")\n    //   .style(\"text-anchor\", \"start\")\n    //   .text(\"Total/\")\n    //   .append(\"tspan\")\n    //   .attr(\"dy\", 15)\n    //   .attr(\"x\", yLabelWidth)\n    //   .text(\"Day\")\n    //   .attr(\"class\", \"sum-label-y\")\n    //   .style(\"text-anchor\", \"start\");\n    // x axis sums\n\n    const sumsXAxis = chart.selectAll(\".sums-x\").data(sumsX);\n\n    // styling for the labels\n    sumsXAxis\n      .enter()\n      .append(\"circle\")\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"cy\", 0)\n      .attr(\"class\", \"sums-x\")\n      .style(\"fill\", \"#ffffff\")\n      .style(\"fill-opacity\", 0)\n      .attr(\"cy\", xLabelHeight + maxR)\n      .attr(\"r\", function(d) {\n        return sizeScale(d, sumsX);\n      })\n      .attr(\"cx\", function(d, i) {\n        return yLabelWidth + 3 * maxR + maxR * i * 2;\n      })\n      .attr(\"shape-rendering\", \"auto\")\n      .style(\"fill\", function(d) {\n        return colorScaleAxes(d, sumsX);\n      })\n      .style(\"fill-opacity\", 1)\n      .style(\"stroke\", \"#9e9999\")\n      .style(\"stroke-width\", 1);\n\n    const sumsXValues = chart.selectAll(\".sums-x-value\").data(sumsX)\n    // //adds mouseover transition\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"sums-x-value\")\n      .on(\"mouseover\", function(d) {\n        const selection = d3.select(this);\n        if (d > 0) {\n          selection.style(\"cursor\", \"pointer\");\n        }\n        selection\n          .select(\"circle\")\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n        selection\n          .select(\"text\")\n          .transition()\n          .duration(100)\n          .style(\"opacity\", 1);\n      })\n      .on(\"mouseout\", function(d) {\n        const selection = d3.select(this);\n        selection.style(\"cursor\", \"default\");\n        selection\n          .select(\"circle\")\n          .transition()\n          .style(\"opacity\", 0);\n        selection\n          .select(\"text\")\n          .transition()\n          .style(\"opacity\", 0);\n      });\n      // .on(\"click\", function(d, i) {\n      //   if (d > 0) {\n      //     localThis.onClick(\"hour\", 0, i);\n      //   }\n      // });\n\n    // creates the needed svg and text elements to make the labels actually readable\n    sumsXValues\n      .append(\"circle\")\n      .attr(\"r\", function(d) {\n        return maxR;\n      })\n      .attr(\"cx\", function(d, i) {\n        return maxR;\n        })\n      .attr(\"cy\", function(d, i) {\n        return maxR;\n      })\n      .style(\"fill\", this.axisColors[1])\n      .style(\"opacity\", 0);\n\n    sumsXValues\n      .append(\"text\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"fill\", \"#ffffff\")\n      .style(\"opacity\", 0)\n      .style('font-size', 8);\n\n    sumsXValues.exit().remove();\n\n    // centers and resizes the text so it doesn't exceed its rect\n    sumsXValues\n      .attr(\"transform\", function(d, i) {\n        return (\n          \"translate(\" +\n          (yLabelWidth + 2 * maxR * i + 2 * maxR) +\n          \", \" +\n          xLabelHeight +\n          \")\"\n        );\n      })\n      .select(\"text\")\n      .text(function(d) {\n        return d;\n      })\n      .attr(\"y\", maxR + 4)\n      .attr(\"x\", maxR);\n\n    // ensures the colored rect on the label is the width and height of the circle diameter (maxR * 2)\n    sumsXValues\n      .select(\"rect\")\n      .attr(\"width\", maxR * 2)\n      .attr(\"height\", maxR * 2);\n\n    // create left label for sumsX\n    // chart\n    //   .append(\"text\")\n    //   .attr(\"x\", width + 2 * maxR + 7)\n    //   .attr(\"y\", xLabelHeight + maxR / 2)\n    //   .append(\"tspan\")\n    //   .attr(\"class\", \"sum-label-y\")\n    //   .style(\"text-anchor\", \"start\")\n    //   .text(\"Total/\")\n    //   .append(\"tspan\")\n    //   .attr(\"dy\", 15)\n    //   .attr(\"x\", width + 2 * maxR + 7)\n    //   .text(\"Hr\")\n    //   .attr(\"class\", \"sum-label-y\")\n    //   .style(\"text-anchor\", \"start\");\n\n    // draw in-chart light axes separating squares\n    chart.selectAll(\".vert\")\n      .data(labelsX)\n      .enter()\n      .append(\"line\")\n      .attr(\"class\", \"vert\")\n      .attr(\"stroke\", \"#888\")\n      .attr(\"stroke-width\", 1)\n      .style(\"shape-rendering\", \"crispEdges\")\n      .style(\"stroke-opacity\", 0)\n      .attr(\"x1\", function(d, i) {\n        return maxR * i * 2 + yLabelWidth + 2 * maxR;\n      })\n      .attr(\"x2\", function(d, i) {\n        return maxR * i * 2 + yLabelWidth + 2 * maxR;\n      })\n      .attr(\"y1\", xLabelHeight + borderWidth / 2)\n      .attr(\"y2\", height + 2 * maxR)\n      .style(\"stroke-opacity\", function(d, i) {\n        return i ? 0.5 : 0;\n      });\n\n    chart.selectAll(\".horiz\")\n      .data(data, function(d) {\n        return d.day_of_week;\n      })\n      .enter()\n      .append(\"line\")\n      .attr(\"class\", \"horiz\")\n      .attr(\"x1\", yLabelWidth + borderWidth / 2)\n      .attr(\"stroke\", \"#888\")\n      .attr(\"stroke-width\", 1)\n      .style(\"shape-rendering\", \"crispEdges\")\n      .style(\"stroke-opacity\", 0)\n      .attr(\"x2\", (maxR * 25 * 2) + yLabelWidth)\n      .attr(\"y1\", function(d, i) {\n        return i * maxR * 2 + xLabelHeight + 2 * maxR;\n      })\n      .attr(\"y2\", function(d, i) {\n        return i * maxR * 2 + xLabelHeight + 2 * maxR;\n      })\n      .style(\"stroke-opacity\", function(d, i) {\n        return i ? 0.5 : 0;\n      });\n\n    // outer Border Bottom\n    chart\n      .append(\"line\")\n      .attr(\"x1\", yLabelWidth + borderWidth / 2)\n      .attr(\"y1\", function(d, i) {\n        return (i * maxR * 2 + 2 * maxR) + height;\n      })\n      .attr(\"x2\", maxR * 25 * 2 + yLabelWidth)\n      .attr(\"y2\", function(d, i) {\n        return (i * maxR * 2 + 2 * maxR) + height;\n      })\n      .attr(\"stroke-width\", 2)\n      .attr(\"shape-rendering\", \"crispEdges\")\n      .attr(\"stroke\", \"grey\")\n      .attr('class', 'punch-border');\n\n    // outer border right\n    chart\n      .append(\"line\")\n      .attr(\"x1\", function(d, i) {\n        return (maxR * 25 * 2) + yLabelWidth //+ width;\n      })\n      .attr(\"x2\", function(d, i) {\n        return (maxR * 25 * 2) + yLabelWidth //+ width;\n      })\n      .attr(\"y1\", xLabelHeight + borderWidth / 2)\n      .attr(\"y2\", height + 2 * maxR)\n      .attr(\"stroke-width\", 2)\n      .style(\"shape-rendering\", \"crispEdges\")\n      .attr(\"stroke\", \"grey\")\n      .attr('class', 'punch-border');\n\n    // Emit ready event.\n  }\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'eikos-sunburst',\n  template: `\n  <h2>{{title}}</h2>\n  <div style=\"height: 750px; width: 750px;\" >\n      <div [id]=\"propID\" style=\"width:100%;height:100%\"> </div>\n  </div>\n`\n})\nexport class SunburstComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() propID = 'line';\n  @Input() data: [{name: string, children: [{name: string, size: number}, {name: string, children: []}]}];\n  @Input() title: string;\n\n  constructor() { }\n\n  // you might need a method like this to reformat given data with the appropriate field names,\n  // get dataModel() {\n  //   return this.data.map(item => {\n  //     return {date: item.something, value: item.somethingElse};\n  //   });\n  // }\n\n  ngOnInit() {\n    this.drawSunburst();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.drawSunburst();\n  }\n\n  ngAfterViewInit() {\n    this.drawSunburst();\n  }\n\n  drawSunburst() {\n        // let localThis = this;\n        d3.selectAll(`.${this.propID}_tooltip`).remove();\n        const selection_string = \"#\" + this.propID;\n        if (document.querySelectorAll(selection_string + \" svg\")[0] != null) {\n          document.querySelectorAll(selection_string + \" svg\")[0].remove();\n        }\n        let element: any;\n        const selected = document.querySelectorAll(selection_string);\n\n        if (selected[0] == null) {\n          element = [{clientWidth: 500, clientHeight: 500}];\n        } else {\n          element = selected[0];\n        }\n\n        const\twidth = element.clientWidth;\n        let\theight = element.clientHeight;\n\n        // Account for panel heading height if it exists.\n        if (this.title) {\n          height -= 40;\n        }\n\n        if ( height === undefined || height === 0 ) {\n          height = width / 4;\n        }\n\n        const radius = Math.min(width, height) / 2;\n        const color = d3.scaleOrdinal(d3.schemePaired);\n\n        const formatNumber = d3.format(\",d\");\n\n        let x = d3.scaleLinear()\n            .range([0, 2 * Math.PI]);\n\n        let y = d3.scaleSqrt()\n            .range([0, radius]);\n\n        const partition = d3.partition();\n\n        const arc = d3.arc()\n            .startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x0))); })\n            .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x1))); })\n            .innerRadius(function(d) { return Math.max(0, y(d.y0)); })\n            .outerRadius(function(d) { return Math.max(0, y(d.y1)); });\n\n\n        const svg = d3.select(selection_string).append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n          .append(\"g\")\n            .attr(\"transform\", \"translate(\" + width / 2 + \",\" + (height / 2) + \")\");\n\n        const tooltip = d3\n            .select(\"body\")\n            .append(\"div\")\n            .attr(\"class\", `d3_visuals_tooltip ${this.propID}_tooltip`)\n            .style(\"opacity\", 0);\n\n        const root = d3.hierarchy(this.data[0]);\n        root.sum(function(d) { return d.size; });\n        const nodes = partition(root).descendants();\n\n        svg.selectAll(\"path\")\n            .data(nodes)\n          .enter().append(\"path\")\n            .attr(\"d\", arc)\n            .attr('class', 'segment')\n            .style(\"fill\", function(d) { return color((d.children ? d : d.parent).data.name); })\n            .on(\"click\", function(d) {\n              click(d);\n            })\n            .on(\"mouseover\", function(d) {\n              tooltip.transition()\n                .duration(100)\n                .style(\"opacity\", 1);\n              tooltip\n                .html(\n                   \"Name: \" + d.data.name + \"<br/>\" +  (d.data.size ? \"Value: \" + d.data.size : \"\")\n                )\n                .style(\"left\", d3.event.pageX + 5 + \"px\")\n                .style(\"top\", d3.event.pageY - 28 + \"px\");\n            })\n            .on(\"mouseout\", function(d) {\n              tooltip.transition()\n                .duration(300)\n                .style(\"opacity\", 0);\n            })\n          .append(\"title\")\n            .text(function(d) { return d.data.name + \"\\n\" + formatNumber(d.value); });\n\n\n\n        function click(d) {\n          svg.transition()\n              .duration(750)\n              .tween(\"scale\", function() {\n                const xd = d3.interpolate(x.domain(), [d.x0, d.x1]),\n                    yd = d3.interpolate(y.domain(), [d.y0, 1]),\n                    yr = d3.interpolate(y.range(), [d.y0 ? 20 : 0, radius]);\n                return function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); };\n              })\n            .selectAll(\"path\")\n              .attrTween(\"d\", function(d) { return function() { return arc(d); }; });\n        }\n\n        d3.select(self.frameElement).style(\"height\", height + \"px\");\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgcatalystComponent } from './ngcatalyst.component';\nimport { BarChartComponent } from './bar-chart.component';\nimport { BubbleChartComponent } from './bubble-chart.component';\nimport { LinePlotComponent } from './line-plot.component';\nimport { PieChartComponent } from './pie-chart.component';\nimport { PunchCardComponent } from './punch-card.component';\nimport { SunburstComponent } from './sunburst.component';\n\n@NgModule({\n  declarations: [NgcatalystComponent,\n    BarChartComponent, BubbleChartComponent, LinePlotComponent, PieChartComponent, PunchCardComponent, SunburstComponent],\n  imports: [\n  ],\n  exports: [NgcatalystComponent,\n    BarChartComponent, BubbleChartComponent, LinePlotComponent, PieChartComponent, PunchCardComponent, SunburstComponent]\n})\nexport class NgcatalystModule { }\n"]}
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("luxon"),require("@angular/core"),require("d3")):"function"==typeof define&&define.amd?define("ngcatalyst",["exports","luxon","@angular/core","d3"],e):e(t.ngcatalyst={},t.luxon,t.ng.core,t.d3)}(this,function(t,e,r,W){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var a=(n.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[]},n.ngInjectableDef=r.defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n);function n(){}var i=(o.prototype.ngOnInit=function(){},o.decorators=[{type:r.Component,args:[{selector:"eikos-ngcatalyst",template:"\n    <p>\n      ngcatalyst works!\n    </p>\n  "}]}],o.ctorParameters=function(){return[]},o);function o(){}var l=(Object.defineProperty(s.prototype,"dataModel",{get:function(){return this.data.map(function(t){return{x:t.name,y:t.value}})},enumerable:!0,configurable:!0}),s.prototype.ngAfterViewInit=function(){this.drawBarPlot(this.dataModel,this.propID,this.yAxisLabel,this.xAxisLabel,this.mouseover_callback)},s.prototype.ngOnChanges=function(t){this.drawBarPlot(this.dataModel,this.propID,this.yAxisLabel,this.xAxisLabel,this.mouseover_callback)},s.prototype.mouseover_callback=function(t){return t},s.prototype.drawBarPlot=function(t,e,r,a,n){var i=this;W.selectAll("."+this.propID+"_tooltip").remove();var o,l="#"+e;null!=document.querySelectorAll(l+" svg")[0]&&document.querySelectorAll(l+" svg")[0].remove();var s=document.querySelectorAll(l);o=null==s[0]?{clientWidth:500,clientHeight:500}:s[0];var c={top:20,right:30,bottom:15,left:40};0<this.xAxisAngle&&(c.bottom+=this.xAxisAngle/2);var u=o.clientWidth-c.left-c.right,p=o.clientHeight-c.top-c.bottom,d=W.scaleBand().range([0,u]).paddingInner(.2).paddingOuter(.2),y=W.scaleLinear().range([p-c.bottom,0]),h=W.axisBottom().scale(d).tickSizeOuter(0),f=W.axisLeft().scale(y).tickSizeInner(-u).tickSizeOuter(0),m=W.select("body").append("div").attr("class","d3_visuals_tooltip "+this.propID+"_tooltip").style("opacity",0),x=W.select(l).append("svg").attr("width",u+c.left+c.right).attr("height",p+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");0<t.length&&(y.domain([0,W.max(t,function(t){return t.y})]),d.domain(t.map(function(t){return t.x}))),x.append("g").attr("class","x axis").attr("transform","translate(0,"+(p-c.bottom)+")").call(h).append("text").attr("class","label").attr("x",u/2+c.right).attr("y",30).style("text-anchor","middle").text(a);var g=x.selectAll("text");if(0<this.xAxisAngle){g.attr("transform","rotate("+this.xAxisAngle+") translate(0, "+c.top+")").style("text-anchor","middle");var v=g.node().getBBox();45===this.xAxisAngle&&g.attr("x",15).attr("y",2*v.height),90===this.xAxisAngle&&g.attr("x",v.width-10).attr("y",0)}x.append("g").attr("class","y axis").call(f).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(r),0<t.length&&x.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",function(t){return d(t.x)}).attr("y",function(t){return y(t.y)}).attr("height",function(t){return p-y(t.y)-c.bottom}).attr("width",d.bandwidth()-d.paddingInner()).style("fill",i.color).on("mouseover",function(t){var e=n(t.y);m.transition().duration(100).style("opacity",1),m.html(a+": <b>"+t.x+"</b><br>"+r+": <b>"+e+"</b>").style("left",W.event.pageX+5+"px").style("top",W.event.pageY-28+"px"),W.select(this).transition().duration(50).style("fill",function(t){var e=function r(t){return["0x"+t[1]+t[2]|0,"0x"+t[3]+t[4]|0,"0x"+t[5]+t[6]|0]}(i.color).map(function(t){return.75*parseInt(t)});return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"})}).on("mouseout",function(t){W.select(this).transition().duration(100).style("fill",i.color),m.transition().duration(300).style("opacity",0)})},s.decorators=[{type:r.Component,args:[{selector:"eikos-bar-chart",template:'\n  <h2>{{title}}</h2>\n    <div style="height: 750px; width: 750px;" >\n      <div [id]="propID" style="width:100%;height:100%">\n      </div>\n    </div>\n  '}]}],s.ctorParameters=function(){return[]},s.propDecorators={data:[{type:r.Input}],propID:[{type:r.Input}],color:[{type:r.Input}],yAxisLabel:[{type:r.Input}],xAxisLabel:[{type:r.Input}],xAxisAngle:[{type:r.Input}],yAxisAngle:[{type:r.Input}],title:[{type:r.Input}]},s);function s(){this.propID="barchart",this.color="#2DA8C9",this.yAxisLabel="y",this.xAxisLabel="x",this.xAxisAngle=45,this.yAxisAngle=45,this.title="Bar Chart"}var c=(Object.defineProperty(u.prototype,"processedData",{get:function(){var t=this.data;try{t.sort(function(t,e){return W.descending(t.value,e.value)})}catch(e){console.error(e)}return t},enumerable:!0,configurable:!0}),u.prototype.ngOnInit=function(){this.drawBubbleChart(this.processedData)},u.prototype.ngOnChanges=function(t){this.drawBubbleChart(this.processedData)},u.prototype.ngAfterViewInit=function(){this.drawBubbleChart(this.processedData)},u.prototype.xValue=function(t){return t.x},u.prototype.yValue=function(t){return t.y},u.prototype.zValue=function(t){return t.value},u.prototype.pretty_duration=function(t){return e.duration.fromObject({seconds:t}).normalize().toObject()},u.prototype.get_min_bubble_size=function(t,e,r){return e<=t?r:t},u.prototype.get_max_bubble_size=function(t,e,r,a){return r<=t?a:e*t+25},u.prototype.get_bubble_sizes=function(t){var e=t<5?5:this.get_min_bubble_size(t,10,5);return{min:e,max:this.get_max_bubble_size(t,e,10,125)}},u.prototype.get_duration_zoom_range=function(t,e){return void 0===e&&(e=1),[1,t/e]},u.prototype.get_x_zoom_range=function(t,e,r){return void 0===r&&(r=1),this.get_duration_zoom_range(W.max(t,e),r)},u.prototype.drawBubbleChart=function(t){if(t){var e,r=this,a="#"+this.propID,n=this.pretty_duration,i=this.xValue,o=this.yValue,l=this.zValue,s=document.querySelectorAll(a);e=null==s[0]?[{clientWidth:500,clientHeight:500}]:s[0];var c,u=this.margin,p=e.clientWidth,d=e.clientHeight,y=(0<p?p:400)-u.left-u.right,h=(0<d?d:400)-u.top-u.bottom,f=this.themeColors;this.title&&(h-=40);var m="#"+this.propID;W.selectAll("."+this.propID+"_tooltip").remove(),null!=document.querySelectorAll(a+" svg")[0]&&document.querySelectorAll(a+" svg")[0].remove();var x,g=W.timeParse(this.dateFormat);this.isDate?(x=W.scaleTime().range([0,y]),t=t.map(function(t){return t.mapped||(t.x=g(t.x),t.mapped=!0),t})):x=W.scaleLinear().range([0,y]);var v=W.axisBottom().scale(x).tickSizeInner(-h).ticks(6);this.isDate?v.tickFormat(W.timeFormat(this.dateFormat)):v.tickFormat(function(t){return r.isTime?n(60*t):t});var b=W.scaleLinear().range([h,0]),A=W.axisLeft().scale(b).tickSizeInner(-y).ticks(4),I=Math.sqrt(W.max(t,function(t){return+t.value})),w=this.get_bubble_sizes(I),D=w.min,_=w.max,C=W.scaleLinear().domain([1,I]).range([D,_]),k=W.min(t,l),L=W.max(t,l),S=W.scaleQuantize().range(f).domain([k,L]),P=W.select("body").append("div").attr("class","d3_visuals_tooltip "+this.propID+"_tooltip").style("opacity",0),z=W.min(t,i),B=W.max(t,i),q=W.min(t,o),M=W.max(t,o);if(this.isDate){var O=x(z),V=x(B);z=x.invert(O-.001*O),B=x.invert(.001*V+V)}else z-=z/2,B+=B/4;x.domain([z,B]),b.domain([q-q/2,M+M/4]),(c=W.select(m).append("svg").attr("width",y+u.left+u.right).attr("height",h+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")")).append("rect").attr("fill-opacity","0").attr("width",y).attr("height",h),c.append("g").attr("class","x axis").attr("id","top-x").attr("transform","translate(0,"+h+")").call(v).append("text").attr("class","label").attr("x",y).attr("y",-10).style("text-anchor","end").text(this.xAxisLabel),c.append("g").attr("class","y axis").attr("id","top-y").call(A).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(this.yAxisLabel),c.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("r",function(t){return C(Math.sqrt(l(t)))}).attr("cx",function(t){return x(i(t))}).attr("cy",function(t){return b(o(t))}).attr("stroke","gray").attr("stroke-width",1).style("fill",function(t){return S(function(t){return t.value}(t))}).style("opacity",.75).on("mouseover",function(t){console.log(P),P.transition().duration(100).style("opacity",1),P.html('<b class="tooltip-header">'+t.label+"</b><br/><b>"+r.xAxisLabel+"</b> "+(r.isTime?r.pretty_duration(60*r.xValue(t)):r.xValue(t))+"<br/><b>"+r.yAxisLabel+": </b>"+r.yValue(t).toFixed(2)+"<br> <b>value:</b> "+r.zValue(t)).style("left",W.event.pageX+5+"px").style("top",W.event.pageY-28+"px"),W.select(P[0]).transition().duration(50).style("opacity",1)}).on("mouseout",function(t){var e=W.select("."+r.propID+"_tooltip");e.transition().duration(300).style("opacity",0),W.select(e[0]).transition().duration(200).style("opacity",0)})}},u.decorators=[{type:r.Component,args:[{selector:"eikos-bubble-chart",template:'\n<h2>{{title}}</h2>\n<div style="height: 750px; width: 750px;" >\n    <div [id]="propID" style="width:100%;height:100%"> </div>\n</div>\n  '}]}],u.ctorParameters=function(){return[]},u.propDecorators={propID:[{type:r.Input}],data:[{type:r.Input}],title:[{type:r.Input}],isTime:[{type:r.Input}],isDate:[{type:r.Input}],themeColors:[{type:r.Input}],yAxisLabel:[{type:r.Input}],xAxisLabel:[{type:r.Input}]},u);function u(){this.propID="bubble",this.title="Bubble Chart",this.isTime=!1,this.isDate=!1,this.themeColors=["#081A4E","#092369","#1A649F","#2485B4","#2DA8C9","#5DC1D0","#9AD5CD","#D5E9CB"],this.yAxisLabel="Value",this.xAxisLabel="Date",this.dateFormat="%Y-%m-%d",this.margin={top:20,right:10,bottom:30,left:20}}var p=(d.prototype.ngOnInit=function(){this.drawLinePlot(this.data,"#"+this.propID,this.color)},d.prototype.ngOnChanges=function(t){this.drawLinePlot(this.data,"#"+this.propID,this.color)},d.prototype.ngAfterViewInit=function(){this.drawLinePlot(this.data,"#"+this.propID,this.color)},d.prototype.drawLinePlot=function(t,e,r){var a=this;W.selectAll("."+this.propID+"_tooltip").remove(),null!=document.querySelectorAll(e+" svg")[0]&&document.querySelectorAll(e+" svg")[0].remove();var n=[];t.forEach(function(t){return n.push(Object.assign({},t))});var i=W.timeParse("%Y-%m-%d"),o=W.timeFormat("%B %-d %Y");"string"==typeof n[0].date&&n.forEach(function(t){t.date=i(t.date)}),n.sort(function(t,e){return t.date-e.date});var l,s=W.max(n,function(t){return t.value})<=1,c=document.querySelectorAll(e),u=20,p=30,d=45,y=40,h=(l=null==c[0]?[{clientWidth:500,clientHeight:500}]:c[0]).clientWidth-y-p,f=l.clientHeight-u-d;function m(t){return t.date}function x(t){return v(m(t))}this.title&&(f-=40);var g,v=W.scaleTime().range([0,h-p]),b=W.axisBottom().scale(v).tickSizeInner(-f).ticks(6);function A(t){return t.value}function I(t){return console.log("y scale is "+w(A(t))),console.log(t),w(A(t))}g=s?W.format("%"):W.format("");var w=W.scaleLinear().range([f,0]);W.scaleLinear().range([f-w(W.min(n)),0]),v.domain(W.extent(n,m)).nice(),w.domain(W.extent(n,A)).nice();var D=W.axisLeft().scale(w).tickSizeInner(-h).tickFormat(g),_=W.line().x(x).y(I).curve(W.curveLinear),C=W.select(e).append("svg").attr("width",h+y+p).attr("height",f+u+d).append("g").attr("transform","translate("+y+","+u+")"),k=W.select("body").append("div").attr("class","d3_visuals_tooltip "+this.propID+"_tooltip").style("opacity",0);C.style("fill","transparent"),C.append("g").attr("class","x axis xaxis axis-line-plot1").attr("transform","translate(0,"+f+")").style("fill","black").style("font-size","14px").call(b).append("text").attr("x",h/2).attr("y",25).attr("dy",".71em").style("text-anchor","middle").attr("font-size","16px").text(this.xAxisLabel),C.append("g").attr("class","y axis axis-line-plot").style("fill","black").call(D).append("text").attr("transform","rotate(-90)").attr("y",-y).attr("dy",".71em").style("text-anchor","end").attr("font-size","16px").text(this.yAxisLabel);var L="clip-"+this.propID;C.append("path").datum(n).attr("class","line lineplotline").attr("d",_).attr("stroke-width",3).attr("stroke",this.color),C.selectAll(".dot").data(n).enter().append("circle").attr("class","dot").attr("r",5).attr("cx",x).attr("cy",I).attr("clip-path","url(#"+L+")").attr("fill","black").attr("opacity",0).on("mouseover",function(t){k.transition().duration(100).style("opacity",1),k.html("Date: "+o(t.date)+"<br>"+a.yAxisLabel+": "+g(A(t))).style("left",W.event.pageX+5+"px").style("top",W.event.pageY-28+"px"),W.select(this).transition().duration(50).style("fill","black").attr("opacity",1)}).on("mouseout",function(t){k.transition().duration(300).style("opacity",0),W.select(this).transition().duration(50).attr("opacity",0)}),C.selectAll(".tick").filter(function(t){return 0===t}).remove()},d.decorators=[{type:r.Component,args:[{selector:"eikos-line-plot",template:'\n  <h2>{{title}}</h2>\n  <div style="height: 750px; width: 750px;" >\n      <div [id]="propID" style="width:100%;height:100%"> </div>\n  </div>\n'}]}],d.ctorParameters=function(){return[]},d.propDecorators={propID:[{type:r.Input}],data:[{type:r.Input}],title:[{type:r.Input}],color:[{type:r.Input}],yAxisLabel:[{type:r.Input}],xAxisLabel:[{type:r.Input}]},d);function d(){this.propID="line",this.color="#000",this.yAxisLabel="Value",this.xAxisLabel="Date"}var y=(h.prototype.ngOnInit=function(){this.drawPieChart()},h.prototype.ngOnChanges=function(t){this.drawPieChart()},h.prototype.ngAfterViewInit=function(){this.drawPieChart()},h.prototype.drawPieChart=function(){var e=this;0===this.total&&this.data&&this.data.forEach(function(t){e.total+=t.value}),W.selectAll("."+this.propID+"_tooltip").remove();var t,r="#"+this.propID;null!=document.querySelectorAll(r+" svg")[0]&&document.querySelectorAll(r+" svg")[0].remove();var a=document.querySelectorAll(r);function n(t){return["0x"+t[1]+t[2]|0,"0x"+t[3]+t[4]|0,"0x"+t[5]+t[6]|0]}t=null==a[0]?{clientWidth:500,clientHeight:500}:a[0];var i=this,o=10,l=0,s=20,c=0,u=t.clientWidth-c-l,p=t.clientHeight-o-s,d=u<p?u/2:p/2,y=W.select(r).append("svg").data([this.data],function(t){if(t)return t.label}).attr("width",u).attr("height",p).append("g").attr("transform","translate("+u/2+","+p/2+")");y.append("text").attr("font-size","4em").attr("y",20).attr("x",-50).text(i.total);var h=W.select("body").append("div").attr("class","d3_visuals_tooltip "+this.propID+"_tooltip").style("opacity",0),f=W.pie().value(function(t){return t.value}),m=this.donutWidth,x=W.arc().innerRadius(m).outerRadius(d),g=y.selectAll("g.slice").data(f).enter().append("g").attr("class","slice");g.on("mouseover",function(t){W.select(this).selectAll("path").attr("fill",function(t){var e=this.attributes.fill.value,r=(e=n(e)).map(function(t){return.75*parseInt(t)});return"rgb("+r[0]+", "+r[1]+", "+r[2]+")"});var e=Math.round(t.data.value/i.total*100);h.transition().duration(100).style("opacity",1),h.html(t.data.label+": <b>"+t.data.value+"</b><br/><b>"+e+"</b>% of total").style("left",W.event.pageX+"px").style("top",W.event.pageY+"px")}).on("mouseout",function(t){h.transition().duration(300).style("opacity",0),W.select(this).selectAll("path").attr("fill",function(t){var e=t.data?t.data.label:t.label;return i.savedColors[e]})});var v=this.colors;if(g.append("path").attr("fill",function(t,e){var r,a=v.length;return i.savedColors[t.data.label]?r=i.savedColors[t.data.label]:(r=a<=e?v[e-a]:v[e],i.savedColors[t.data.label]=r),r}).attr("d",x),800<u){var b=y.selectAll(".legend").data(this.data,function(t){return t.label}).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate(30,"+25*e+")"});b.append("rect").attr("x",20+d).attr("y",20-d).attr("width",20).attr("height",20).attr("fill",function(t,e){var r,a=v.length;return i.savedColors[t.label]?r=i.savedColors[t.label]:(r=a<=e?v[e-a]:v[e],i.savedColors[t.label]=r),r}).attr("d",x),b.append("text").attr("x",45+d).attr("y",30-d).attr("dy",".35em").attr("font-size",14).style("text-anchor","start").text(function(t,e){return i.data[e].label}),b.on("mouseover",function(t){var a=t.label;W.selectAll("g.slice path").data([t],function(t){return t.data?t.data.label:t.label}).attr("fill",function(t){if(t.label===a){var e=this.attributes.fill.value,r=(e=n(e)).map(function(t){return.75*parseInt(t)});return"rgb("+r[0]+", "+r[1]+", "+r[2]+")"}})}),b.on("mouseout",function(t){t.label,W.selectAll("g.slice path").data([t],function(t){return t.data?t.data.label:t.label}).attr("fill",function(t){return i.savedColors[t.label]})})}},h.decorators=[{type:r.Component,args:[{selector:"eikos-pie-chart",template:'\n  <h2>{{title}}</h2>\n  <div style="height: 750px; width: 750px;" >\n      <div [id]="propID" style="width:100%;height:100%"> </div>\n  </div>\n'}]}],h.ctorParameters=function(){return[]},h.propDecorators={propID:[{type:r.Input}],data:[{type:r.Input}],title:[{type:r.Input}],donutWidth:[{type:r.Input}],colors:[{type:r.Input}]},h);function h(){this.propID="pie",this.donutWidth=0,this.colors=["#081A4E","#092369","#1A649F","#2485B4","#2DA8C9","#5DC1D0","#9AD5CD","#D5E9CB","#64B5F6","#01579B"],this.savedColors={},this.total=0}var f=(m.prototype.ngOnInit=function(){this.drawPunchCard()},m.prototype.ngOnChanges=function(t){this.drawPunchCard()},m.prototype.ngAfterViewInit=function(){this.drawPunchCard()},m.prototype.getDay=function(e){return[{name:"Mon",value:2,description:"Monday"},{name:"Tue",value:3,description:"Tuesday"},{name:"Wed",value:4,description:"Wednesday"},{name:"Thu",value:5,description:"Thursday"},{name:"Fri",value:6,description:"Friday"},{name:"Sat",value:7,description:"Saturday"},{name:"Sun",value:1,description:"Sunday"}].filter(function(t){return t.name===e})[0].value},m.prototype.getDayName=function(e){return[{name:"Mon",value:"1",description:"Monday"},{name:"Tue",value:"2",description:"Tuesday"},{name:"Wed",value:"3",description:"Wednesday"},{name:"Thu",value:"4",description:"Thursday"},{name:"Fri",value:"5",description:"Friday"},{name:"Sat",value:"6",description:"Saturday"},{name:"Sun",value:"0",description:"Sunday"}].filter(function(t){return t.value===e})[0].name},m.prototype.drawPunchCard=function(){if(this.data!==undefined){var r=this,t="#"+this.propID;null!=document.querySelectorAll(t+" svg")[0]&&document.querySelectorAll(t+" svg")[0].remove();var e,a=JSON.parse(JSON.stringify(this.data)),n=40,i=75,o=40,l=15,s=document.querySelectorAll(t),c=(e=null==s[0]?[{clientWidth:1e3,clientHeight:500}]:s[0]).clientWidth-l-i-30,u=e.clientHeight/24*7+60-n-o,p=W.select(t).append("svg").attr("width","100%").attr("data-height","0.5678").attr("viewBox","0 0 "+c/2.1+" "+2*u).attr("preserveAspectRatio","xMaxYMax meet").append("g").attr("transform","translate("+l+","+n+")"),d=Array.prototype.concat.apply([],a.map(function(t){return t.hour_volumes})),y=W.max(a.map(function(t){return t.hour_volumes.length})),h=W.min([(c-30)/y,(u-30)/a.length])/2;a.sort(function(t,e){parseInt(t.day_of_week),parseInt(e.day_of_week)}),a.push(a.shift()),1===a[0].day_of_week.length&&(a=a.map(function(t){return t.day_of_week=r.getDayName(t.day_of_week),t}));for(var f=this.labelsX,m=[],x=0;x<a.length;x++){var g=a[x].hour_volumes.reduce(function(t,e){return t+e},0);m.push(g)}var v=[],b=function(r){var t=a.reduce(function(t,e){return t+e.hour_volumes[r]},0);v.push(t)};for(x=0;x<a[0].hour_volumes.length;x++)b(x);var A=function(t,e){return 0===t?0:W.scaleSqrt().domain([W.min(e),W.max(e)]).rangeRound([2,h-3])(t)},I=function(t,e){return W.scaleLinear().domain([W.min(e),W.max(e)]).range(r.axisColors)(t)};p.append("rect").attr("x",30).attr("y",30+2*h).attr("width",2*h).attr("height",u-30).attr("stroke-width",2).attr("stroke","grey").attr("fill","transparent").attr("shape-rendering","crispEdges").attr("class","punch-border"),p.append("rect").attr("x",30+2*h).attr("y",30).attr("width",24*h*2).attr("height",2*h).attr("stroke-width",2).attr("stroke","grey").attr("fill","transparent").attr("shape-rendering","crispEdges").attr("class","punch-border, foo-bar");var w=p.selectAll(".row").data(a,function(t){return t.day_of_week}).enter().append("g").attr("class","row").attr("transform",function(t,e){return"translate("+(30+2*h)+","+(h*e*2+3*h+30)+")"});w.selectAll("circle").data(function(t){return t.hour_volumes}).enter().append("circle").attr("cy",0).style("fill","transparent").text(function(t){return t}).attr("r",function(t){return A(t,d)}).attr("cx",function(t,e){return e*h*2+h}).attr("shape-rendering","auto").style("fill",function(t){return function(t,e){return W.scaleLinear().domain([W.min(e),W.max(e)]).range([r.colors[7],r.colors[0]])(t)}(t,d)});var D=w.selectAll(".dot-label").data(function(r){return r.hour_volumes.map(function(t,e){return[t,r.day_of_week,e]})}).enter().append("g").attr("class","dot-label").on("mouseover",function(t){var e=W.select(this);0<t[0]&&e.style("cursor","pointer"),e.select("circle").transition().duration(100).style("opacity",1),e.select("text").transition().duration(100).style("opacity",1)}).on("mouseout",function(t){var e=W.select(this);e.style("cursor","default"),e.select("circle").transition().style("opacity",0),e.select("text").transition().style("opacity",0)});D.append("circle").attr("r",function(t){return h}).attr("cx",function(t,e){return h}).attr("cy",function(t,e){return h}).style("fill",r.colors[0]).style("opacity",0),D.append("text").style("text-anchor","middle").style("fill","#ffffff").style("opacity",0).style("font-size",8),D.exit().remove(),D.attr("transform",function(t,e){return"translate("+e*h*2+","+-h+")"}).select("text").text(function(t){return t[0]}).attr("y",4+h).attr("x",h),D.select("rect").attr("width",2*h).attr("height",2*h),p.selectAll(".xLabel").data(f).enter().append("text").attr("y",30).attr("transform","translate(0,-6)").attr("class","xLabel").style("text-anchor","middle").style("fill-opacity",0).text(function(t){return t}).attr("x",function(t,e){return h*e*2+3*h+30}).style("fill-opacity",1),p.selectAll(".yLabel").data(a,function(t){return t.day_of_week}).enter().append("text").text(function(t){return t.day_of_week}).attr("x",30).attr("class","yLabel").style("text-anchor","end").style("fill-opacity",0).attr("y",function(t,e){return h*e*2+3*h+30}).attr("transform","translate(-6,"+h/2.5+")").style("fill-opacity",1),p.selectAll(".sums-y").data(m).enter().append("circle").text(function(t){return t}).attr("cy",0).attr("class","sums-y").style("fill","#ffffff").style("fill-opacity",0).attr("cy",function(t,e){return h*e*2+3*h+30}).attr("r",function(t){return A(t,m)}).attr("cx",30+h).attr("shape-rendering","auto").style("fill",function(t){return I(t,m)}).style("fill-opacity",1).style("stroke","#9e9999").style("stroke-width",1);var _=p.selectAll(".sums-y-value").data(m).enter().append("g").attr("class","sums-y-value").on("mouseover",function(t){var e=W.select(this);0<t&&e.style("cursor","pointer"),e.select("circle").transition().duration(0).style("opacity",1),e.select("text").transition().duration(0).style("opacity",1)}).on("mouseout",function(t){var e=W.select(this);e.style("cursor","default"),e.select("circle").transition().style("opacity",0),e.select("text").transition().style("opacity",0)});_.append("circle").attr("r",function(t){return h}).attr("cx",function(t,e){return h}).attr("cy",function(t,e){return h}).style("fill",this.axisColors[1]).style("opacity",0),_.append("text").style("text-anchor","middle").style("fill","#ffffff").style("opacity",0).style("font-size",8),_.exit().remove(),_.attr("transform",function(t,e){return"translate(30,"+(30+2*h+2*h*e)+")"}).select("text").text(function(t){return t}).attr("y",4+h).attr("x",h),_.select("rect").attr("width",2*h).attr("height",2*h),p.selectAll(".sums-x").data(v).enter().append("circle").text(function(t){return t}).attr("cy",0).attr("class","sums-x").style("fill","#ffffff").style("fill-opacity",0).attr("cy",30+h).attr("r",function(t){return A(t,v)}).attr("cx",function(t,e){return 30+3*h+h*e*2}).attr("shape-rendering","auto").style("fill",function(t){return I(t,v)}).style("fill-opacity",1).style("stroke","#9e9999").style("stroke-width",1);var C=p.selectAll(".sums-x-value").data(v).enter().append("g").attr("class","sums-x-value").on("mouseover",function(t){var e=W.select(this);0<t&&e.style("cursor","pointer"),e.select("circle").transition().duration(100).style("opacity",1),e.select("text").transition().duration(100).style("opacity",1)}).on("mouseout",function(t){var e=W.select(this);e.style("cursor","default"),e.select("circle").transition().style("opacity",0),e.select("text").transition().style("opacity",0)});C.append("circle").attr("r",function(t){return h}).attr("cx",function(t,e){return h}).attr("cy",function(t,e){return h}).style("fill",this.axisColors[1]).style("opacity",0),C.append("text").style("text-anchor","middle").style("fill","#ffffff").style("opacity",0).style("font-size",8),C.exit().remove(),C.attr("transform",function(t,e){return"translate("+(30+2*h*e+2*h)+", 30)"}).select("text").text(function(t){return t}).attr("y",4+h).attr("x",h),C.select("rect").attr("width",2*h).attr("height",2*h),p.selectAll(".vert").data(f).enter().append("line").attr("class","vert").attr("stroke","#888").attr("stroke-width",1).style("shape-rendering","crispEdges").style("stroke-opacity",0).attr("x1",function(t,e){return h*e*2+30+2*h}).attr("x2",function(t,e){return h*e*2+30+2*h}).attr("y1",30.5).attr("y2",u+2*h).style("stroke-opacity",function(t,e){return e?.5:0}),p.selectAll(".horiz").data(a,function(t){return t.day_of_week}).enter().append("line").attr("class","horiz").attr("x1",30.5).attr("stroke","#888").attr("stroke-width",1).style("shape-rendering","crispEdges").style("stroke-opacity",0).attr("x2",25*h*2+30).attr("y1",function(t,e){return e*h*2+30+2*h}).attr("y2",function(t,e){return e*h*2+30+2*h}).style("stroke-opacity",function(t,e){return e?.5:0}),p.append("line").attr("x1",30.5).attr("y1",function(t,e){return e*h*2+2*h+u}).attr("x2",25*h*2+30).attr("y2",function(t,e){return e*h*2+2*h+u}).attr("stroke-width",2).attr("shape-rendering","crispEdges").attr("stroke","grey").attr("class","punch-border"),p.append("line").attr("x1",function(t,e){return 25*h*2+30}).attr("x2",function(t,e){return 25*h*2+30}).attr("y1",30.5).attr("y2",u+2*h).attr("stroke-width",2).style("shape-rendering","crispEdges").attr("stroke","grey").attr("class","punch-border")}},m.decorators=[{type:r.Component,args:[{selector:"eikos-punch-card",template:'\n  <h2>{{title}}</h2>\n  <div style="height: 750px; width: 1500px; margin-left: 3%" >\n      <div [id]="propID" style="width:100%;height:100%"> </div>\n  </div>\n',styles:["\n    .punch-border {\n      stroke: grey\n    }\n  "]}]}],m.ctorParameters=function(){return[]},m.propDecorators={propID:[{type:r.Input}],data:[{type:r.Input}],title:[{type:r.Input}],axisColors:[{type:r.Input}],axisLabel:[{type:r.Input}],colors:[{type:r.Input}]},m);function m(){this.propID="punch",this.axisColors=["#e5b1a5","#ff2b2b"],this.axisLabel="Date",this.colors=["#081A4E","#092369","#1A649F","#2485B4","#2DA8C9","#5DC1D0","#9AD5CD","#D5E9CB","#64B5F6","#01579B"],this.labelsX=["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"]}var x=(g.prototype.ngOnInit=function(){this.drawSunburst()},g.prototype.ngOnChanges=function(t){this.drawSunburst()},g.prototype.ngAfterViewInit=function(){this.drawSunburst()},g.prototype.drawSunburst=function(){W.selectAll("."+this.propID+"_tooltip").remove();var t,e="#"+this.propID;null!=document.querySelectorAll(e+" svg")[0]&&document.querySelectorAll(e+" svg")[0].remove();var r=document.querySelectorAll(e),a=(t=null==r[0]?[{clientWidth:500,clientHeight:500}]:r[0]).clientWidth,n=t.clientHeight;this.title&&(n-=40),n!==undefined&&0!==n||(n=a/4);var i=Math.min(a,n)/2,o=W.scaleOrdinal(W.schemePaired),l=W.format(",d"),s=W.scaleLinear().range([0,2*Math.PI]),c=W.scaleSqrt().range([0,i]),u=W.partition(),p=W.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,s(t.x0)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,s(t.x1)))}).innerRadius(function(t){return Math.max(0,c(t.y0))}).outerRadius(function(t){return Math.max(0,c(t.y1))}),d=W.select(e).append("svg").attr("width",a).attr("height",n).append("g").attr("transform","translate("+a/2+","+n/2+")"),y=W.select("body").append("div").attr("class","d3_visuals_tooltip "+this.propID+"_tooltip").style("opacity",0),h=W.hierarchy(this.data[0]);h.sum(function(t){return t.size});var f=u(h).descendants();d.selectAll("path").data(f).enter().append("path").attr("d",p).attr("class","segment").style("fill",function(t){return o((t.children?t:t.parent).data.name)}).on("click",function(t){!function e(t){d.transition().duration(750).tween("scale",function(){var e=W.interpolate(s.domain(),[t.x0,t.x1]),r=W.interpolate(c.domain(),[t.y0,1]),a=W.interpolate(c.range(),[t.y0?20:0,i]);return function(t){s.domain(e(t)),c.domain(r(t)).range(a(t))}}).selectAll("path").attrTween("d",function(t){return function(){return p(t)}})}(t)}).on("mouseover",function(t){y.transition().duration(100).style("opacity",1),y.html("Name: "+t.data.name+"<br/>"+(t.data.size?"Value: "+t.data.size:"")).style("left",W.event.pageX+5+"px").style("top",W.event.pageY-28+"px")}).on("mouseout",function(t){y.transition().duration(300).style("opacity",0)}).append("title").text(function(t){return t.data.name+"\n"+l(t.value)}),W.select(self.frameElement).style("height",n+"px")},g.decorators=[{type:r.Component,args:[{selector:"eikos-sunburst",template:'\n  <h2>{{title}}</h2>\n  <div style="height: 750px; width: 750px;" >\n      <div [id]="propID" style="width:100%;height:100%"> </div>\n  </div>\n'}]}],g.ctorParameters=function(){return[]},g.propDecorators={propID:[{type:r.Input}],data:[{type:r.Input}],title:[{type:r.Input}]},g);function g(){this.propID="line"}var v=(b.decorators=[{type:r.NgModule,args:[{declarations:[i,l,c,p,y,f,x],imports:[],exports:[i,l,c,p,y,f,x]}]}],b);function b(){}t.NgcatalystService=a,t.NgcatalystComponent=i,t.NgcatalystModule=v,t.BarChartComponent=l,t.BubbleChartComponent=c,t.LinePlotComponent=p,t.PieChartComponent=y,t.PunchCardComponent=f,t.SunburstComponent=x,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngcatalyst.umd.min.js.map